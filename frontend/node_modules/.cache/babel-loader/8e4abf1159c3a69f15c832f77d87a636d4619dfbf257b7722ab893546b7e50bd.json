{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:5000/api';\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add token to requests if it exists\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Add response interceptor to handle errors\napi.interceptors.response.use(response => response, error => {\n  if (error.code === 'ERR_NETWORK') {\n    throw new Error('Network Error: Unable to connect to the server');\n  }\n  if (error.response) {\n    throw error.response.data.error || 'An error occurred';\n  }\n  throw error;\n});\nexport const login = async (email, password) => {\n  try {\n    const response = await api.post('/auth/login', {\n      email,\n      password\n    });\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n    }\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\nexport const signup = async userData => {\n  try {\n    const response = await api.post('/auth/signup', userData);\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n    }\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\nexport const submitQuestionnaire = async profileData => {\n  try {\n    console.log('Submitting profile data:', profileData);\n    const response = await api.post('/users/questionnaire', {\n      age: profileData.age,\n      weight: profileData.weight,\n      height: profileData.height,\n      experience: profileData.experience,\n      poseCount: profileData.poseCount,\n      practiceDuration: profileData.practiceDuration,\n      practiceFrequency: profileData.practiceFrequency,\n      focusAreas: profileData.focusAreas\n    });\n\n    // Store preferences in localStorage for immediate access\n    if (response.data.profile) {\n      localStorage.setItem('userPreferences', JSON.stringify({\n        experience: response.data.profile.experience,\n        poseCount: response.data.profile.poseCount,\n        practiceDuration: response.data.profile.practiceDuration,\n        practiceFrequency: response.data.profile.practiceFrequency,\n        focusAreas: response.data.profile.focusAreas\n      }));\n    }\n    console.log('Profile submission response:', response.data);\n    return response.data;\n  } catch (error) {\n    console.error('Questionnaire submission error:', error);\n    if (error.response) {\n      console.error('Error response:', error.response.data);\n      throw error.response.data.error || 'Failed to submit questionnaire';\n    }\n    throw error;\n  }\n};\nexport const getUserProfile = async () => {\n  try {\n    const response = await api.get('/user/profile');\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\nexport const logout = () => {\n  localStorage.removeItem('token');\n};\nexport default api;","map":{"version":3,"names":["axios","API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","code","Error","data","login","email","password","post","setItem","signup","userData","submitQuestionnaire","profileData","console","log","age","weight","height","experience","poseCount","practiceDuration","practiceFrequency","focusAreas","profile","JSON","stringify","getUserProfile","get","logout","removeItem"],"sources":["C:/Users/Quant/Documents/Programming/Projects/Hackathon/MakeUofT/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\nconst api = axios.create({\r\n    baseURL: API_URL,\r\n    headers: {\r\n        'Content-Type': 'application/json'\r\n    }\r\n});\r\n\r\n// Add token to requests if it exists\r\napi.interceptors.request.use((config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n});\r\n\r\n// Add response interceptor to handle errors\r\napi.interceptors.response.use(\r\n    (response) => response,\r\n    (error) => {\r\n        if (error.code === 'ERR_NETWORK') {\r\n            throw new Error('Network Error: Unable to connect to the server');\r\n        }\r\n        if (error.response) {\r\n            throw error.response.data.error || 'An error occurred';\r\n        }\r\n        throw error;\r\n    }\r\n);\r\n\r\nexport const login = async (email, password) => {\r\n    try {\r\n        const response = await api.post('/auth/login', { email, password });\r\n        if (response.data.token) {\r\n            localStorage.setItem('token', response.data.token);\r\n        }\r\n        return response.data;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const signup = async (userData) => {\r\n    try {\r\n        const response = await api.post('/auth/signup', userData);\r\n        if (response.data.token) {\r\n            localStorage.setItem('token', response.data.token);\r\n        }\r\n        return response.data;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const submitQuestionnaire = async (profileData) => {\r\n    try {\r\n        console.log('Submitting profile data:', profileData);\r\n        const response = await api.post('/users/questionnaire', {\r\n            age: profileData.age,\r\n            weight: profileData.weight,\r\n            height: profileData.height,\r\n            experience: profileData.experience,\r\n            poseCount: profileData.poseCount,\r\n            practiceDuration: profileData.practiceDuration,\r\n            practiceFrequency: profileData.practiceFrequency,\r\n            focusAreas: profileData.focusAreas\r\n        });\r\n\r\n        // Store preferences in localStorage for immediate access\r\n        if (response.data.profile) {\r\n            localStorage.setItem('userPreferences', JSON.stringify({\r\n                experience: response.data.profile.experience,\r\n                poseCount: response.data.profile.poseCount,\r\n                practiceDuration: response.data.profile.practiceDuration,\r\n                practiceFrequency: response.data.profile.practiceFrequency,\r\n                focusAreas: response.data.profile.focusAreas\r\n            }));\r\n        }\r\n\r\n        console.log('Profile submission response:', response.data);\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error('Questionnaire submission error:', error);\r\n        if (error.response) {\r\n            console.error('Error response:', error.response.data);\r\n            throw error.response.data.error || 'Failed to submit questionnaire';\r\n        }\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const getUserProfile = async () => {\r\n    try {\r\n        const response = await api.get('/user/profile');\r\n        return response.data;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const logout = () => {\r\n    localStorage.removeItem('token');\r\n};\r\n\r\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}